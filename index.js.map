{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport { linkEl } from '../main';\nconst URL_PIXABAY = 'https://pixabay.com/api/';\nconst API_KEY = '46219346-243694830f7cca451bf7f7da0';\nconst PER_PAGE = 15;\n// робимо запит , збрираю url string , якщо все ок то повертаю дані у вигляді [{}], якщо не ок то генерую помилку та\n// очищаю innerHTML в ul\n// export function fetchImages(query) {\n//   return fetch(`${URL_PIXABAY}?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true\n// `)\n//     .then(response => {\n//       if (!response.ok) {\n//         linkEl.list.innerHTML = '';\n//         throw new Error(\n//           `Error fetching images: ${response.status} ${response.statusText}`\n//         );\n//       }\n//       return response.json();\n//     })\n//     .then(data => data.hits);\n// }\n\nexport async function fetchImages(query, page = 1) {\n  // використовуємо обєкт параметрів пошуку\n\n  const searchParams = new URLSearchParams({\n    q: query,\n    per_page: PER_PAGE,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page,\n  });\n\n  const url = `${URL_PIXABAY}?key=${API_KEY}&${searchParams}}`;\n\n  const response = await axios.get(url);\n\n  if (response.data.hits.length === 0) {\n    const msg = 'Не знайшлося відповідного контенту, спробуйте знову';\n    throw new Error(msg);\n  }\n\n  //     const response = await axios.get(\n  //       `${URL_PIXABAY}?key=${API_KEY}&q=${query}&per_page=${PER_PAGE}&image_type=photo&orientation=horizontal&safesearch=true\n  // `\n  //     );\n\n  return response.data;\n}\n","import { linkEl } from '../main';\nconst listEl = document.querySelector('.gallery');\nexport function photoMarkup(data) {\n  if (data.length === 0) {\n    linkEl.list.innerHTML = '';\n    return;\n  }\n  linkEl.list.innerHTML = data.hits\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n            <li class=\"gallery-item\">\n                <a href=\"${largeImageURL}\" class=\"gallery-link\">\n                    <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-image\" />\n                </a>\n                <div class=\"info\">\n                    <p class=\"info-item\"><span>Likes</span> ${likes}</p>\n                    <p class=\"info-item\"><span>Views</span> ${views}</p>\n                    <p class=\"info-item\"><span>Comments</span> ${comments}</p>\n                    <p class=\"info-item\"><span>Downloads</span> ${downloads}</p>\n                </div>\n            </li>\n        `\n    )\n    .join('');\n  console.log();\n}\n","// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport axios from 'axios';\n\nimport { fetchImages } from './js/pixabay-api';\nimport { photoMarkup } from './js/render-functions';\n\nexport const linkEl = {\n  form: document.querySelector('.form'),\n  loader: document.querySelector('.loader'),\n  list: document.querySelector('.gallery'),\n  loadMoreBtn: document.querySelector('.load-more-btn'),\n};\n\nlinkEl.form.addEventListener('submit', formHandler);\nlinkEl.loadMoreBtn.addEventListener('click', loadMoreBtnHandler);\n\n// обробник кнопки дозавантаження\nfunction loadMoreBtnHandler(e) {\n  e.preventDefault();\n\n  pageCount += 1;\n}\n\n//\n//  для галереї\nlet gallery = new SimpleLightbox('.gallery a');\n//\n// для пагінації\nlet pageCount = null;\n//\n//\nasync function formHandler(e) {\n  e.preventDefault();\n  linkEl.list.innerHTML = '';\n  // отримуємо значення запиту від користувача\n  const query = e.target.elements['search-area'].value.trim();\n  if (query === '') {\n    iziToast.error({\n      position: 'topRight',\n      message: 'Введіть будь-ласка значення для пошуку',\n    });\n    return;\n  }\n\n  // перед запитом очищаємо інпут та показуємо лоадер\n  e.target.elements['search-area'].value = '';\n  linkEl.loader.classList.add('active');\n  // робимо запит\n  try {\n    const data = await fetchImages(query);\n    photoMarkup(data);\n    gallery.refresh();\n  } catch (error) {\n    linkEl.loader.classList.remove('active');\n    linkEl.list.innerHTML = '';\n\n    console.dir(error);\n    iziToast.error({\n      position: 'topRight',\n      message: error.message,\n      // message: 'Не знайшлося відповідного контенту, спробуйте знову',\n    });\n  }\n  // await fetchImages(query)\n  // обробка запиту , позначили що прийшла data , ховаю лоадер та обробляємо негативний кейс\n  // .then(data => {\n  //   linkEl.loader.classList.remove('active');\n  //   if (data.hits.length === 0) {\n  //     linkEl.list.innerHTML = '';\n  //     iziToast.error({\n  //       position: 'topRight',\n  //       message:\n  //         'Sorry, there are no images matching your search query. Please try again!',\n  //     });\n  //     return;\n  //   }\n  //   // отримали дані та прокидуємо їх в функцію для створення розмітки\n  //   photoMarkup(data);\n  //   linkEl.loadMoreBtn.classList.remove('is-hidden');\n  //   gallery.refresh();\n  // })\n  // .catch(error => {\n  //   linkEl.loadMoreBtn.classList.add('is-hidden');\n  //   linkEl.loader.classList.remove('active');\n  //   linkEl.list.innerHTML = '';\n  //   iziToast.error({\n  //     position: 'topRight',\n  //     message: error,\n  //   });\n  // });\n}\n"],"names":["URL_PIXABAY","API_KEY","PER_PAGE","fetchImages","query","page","searchParams","url","response","axios","msg","photoMarkup","data","linkEl","webformatURL","largeImageURL","tags","likes","views","comments","downloads","formHandler","loadMoreBtnHandler","e","pageCount","gallery","SimpleLightbox","iziToast","error"],"mappings":"owBAEA,MAAMA,EAAc,2BACdC,EAAU,qCACVC,EAAW,GAkBV,eAAeC,EAAYC,EAAOC,EAAO,EAAG,CAGjD,MAAMC,EAAe,IAAI,gBAAgB,CACvC,EAAGF,EACH,SAAUF,EACV,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAG,CACJ,CAAG,EAEKE,EAAM,GAAGP,CAAW,QAAQC,CAAO,IAAIK,CAAY,IAEnDE,EAAW,MAAMC,EAAM,IAAIF,CAAG,EAEpC,GAAIC,EAAS,KAAK,KAAK,SAAW,EAAG,CACnC,MAAME,EAAM,sDACZ,MAAM,IAAI,MAAMA,CAAG,CACpB,CAOD,OAAOF,EAAS,IAClB,CChDe,SAAS,cAAc,UAAU,EACzC,SAASG,EAAYC,EAAM,CAChC,GAAIA,EAAK,SAAW,EAAG,CACrBC,EAAO,KAAK,UAAY,GACxB,MACD,CACDA,EAAO,KAAK,UAAYD,EAAK,KAC1B,IACC,CAAC,CACC,aAAAE,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA;AAAA,2BAEeL,CAAa;AAAA,gCACRD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,8DAGIC,CAAK;AAAA,8DACLC,CAAK;AAAA,iEACFC,CAAQ;AAAA,kEACPC,CAAS;AAAA;AAAA;AAAA,SAItE,EACA,KAAK,EAAE,EACV,QAAQ,IAAG,CACb,CClBO,MAAMP,EAAS,CACpB,KAAM,SAAS,cAAc,OAAO,EACpC,OAAQ,SAAS,cAAc,SAAS,EACxC,KAAM,SAAS,cAAc,UAAU,EACvC,YAAa,SAAS,cAAc,gBAAgB,CACtD,EAEAA,EAAO,KAAK,iBAAiB,SAAUQ,CAAW,EAClDR,EAAO,YAAY,iBAAiB,QAASS,CAAkB,EAG/D,SAASA,EAAmBC,EAAG,CAC7BA,EAAE,eAAc,EAEhBC,GAAa,CACf,CAIA,IAAIC,EAAU,IAAIC,EAAe,YAAY,EAGzCF,EAAY,KAGhB,eAAeH,EAAYE,EAAG,CAC5BA,EAAE,eAAc,EAChBV,EAAO,KAAK,UAAY,GAExB,MAAMT,EAAQmB,EAAE,OAAO,SAAS,aAAa,EAAE,MAAM,OACrD,GAAInB,IAAU,GAAI,CAChBuB,EAAS,MAAM,CACb,SAAU,WACV,QAAS,wCACf,CAAK,EACD,MACD,CAGDJ,EAAE,OAAO,SAAS,aAAa,EAAE,MAAQ,GACzCV,EAAO,OAAO,UAAU,IAAI,QAAQ,EAEpC,GAAI,CACF,MAAMD,EAAO,MAAMT,EAAYC,CAAK,EACpCO,EAAYC,CAAI,EAChBa,EAAQ,QAAO,CAChB,OAAQG,EAAO,CACdf,EAAO,OAAO,UAAU,OAAO,QAAQ,EACvCA,EAAO,KAAK,UAAY,GAExB,QAAQ,IAAIe,CAAK,EACjBD,EAAS,MAAM,CACb,SAAU,WACV,QAASC,EAAM,OAErB,CAAK,CACF,CA4BH"}